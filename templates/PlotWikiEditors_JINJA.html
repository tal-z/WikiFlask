<!DOCTYPE html>
<style>

    /* Figure wrapper contains:
        -Title
        -Chart
        -Legend
    */

        * {
            font-family:  "Courier New", "Lucida Console", monospace;
            box-sizing: border-box;
        }

        html,body {
            margin: 0;
            padding: 0;
        }

        body {
            height: 100vh;
            width: 100vw;
        }

        .sidebar {
            float: left;
            background: #eeeeee;
            height: 100vh;
            width: 20vw;
            overflow: visible;
            border-right: 1px solid;
            border-color: #bcbcbc;
        }

        .sidebar-header {
            padding-top: 10px;
            font-weight: bold;
            text-align: center;
        }

        .sidebar-btn {
            text-align: center;
        }

        /* Content contains everything but the sidebar and script*/

        .content {
            float: left;
            width: 80%;
        }

        .figure-wrapper {
            display: inline-block;
            margin: 10px;
            padding: 10px;
            width: 75%;
        }

        .title {
             font-size: 30px;
             width: 100%;
             font-weight: bold;
             padding-left: 85px;

        }

        .chart-legend-wrapper {
            white-space: nowrap;
        }

        #chart{
            display: inline-block;
            float: left;
        }

        img {
            height: 70vh;
        }


        .editors a {
            padding-left: 3px;
            display: inline-block;
            overflow: visible;
            vertical-align:top;
            width: auto;
            max-width:30%;
            white-space: nowrap;
        }

        #circle {
            display: inline-block;
            width: 16px;
            height: 16px;
            -webkit-border-radius: 8px;
            -moz-border-radius: 8px;
            white-space: nowrap;
        }


    /* Legend contains:
        -Circles
        -Editors
    */

    .legend {
        position: sticky;
        padding: 3px 3px 3px 3px;
        margin-top: 16px;
        display: inline-block;
        vertical-align:top;
        background: #eeeeee;
        border-style: solid;
        border-color: #bcbcbc;
        border-width: 1px;
        min-width: 100px;
    }

    form {
        margin: 10px;
        padding-left: 85px;
    }


    </style>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Plot Wikipedia Editors</title>
</head>
<body>

<div class="sidebar">
    <div class="sidebar-header">Actions for Page "{{page_title}}"</div>
    <div class="sidebar-btn"><a href="/plot_wiki_revisions?page_title={{page_title}}">View Revisions Over Time</a></div>
</div>


<div class="content">

<div class="figure-wrapper">
    <div class="title">{{title}}</div>

    <div class="chart-legend-wrapper">

    <div id="chart"><img class="about" src="{{image}}" onerror="this.onerror=null; this.src='static/W_mark.png'" alt="Click below"/></div>

    <div class="legend">

        <div class="editors">
            {% for item in user_colors %}

                <div id="circle" style="background: {{item[1]}}"></div>
                <a href="https://en.wikipedia.org/wiki/Special:Contributions/{{item[0]}}" >{{item[0]}}</a>
                <br>

            {% endfor %}
        </div>
    </div>
</div>
    </div>

   <form action="/plot_wiki_editors_JINJA"   id=plot_wiki_editors_JINJA>
            <label class="label" for="page_title">Enter Page Title Here:</label><br>
            <input class="searchbox" type="text" id="page_title" placeholder="Enter the title of a Wikipedia page." name="page_title" style="width: 240px"><br>
            <button type="submit">Plot Editor Activity!</button>
        </form>

               <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.3/themes/smoothness/jquery-ui.css" />
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.3/jquery-ui.min.js"></script>
<script type="text/javascript">
$(".searchbox").autocomplete({
    position: { my: "left bottom", at: "left top"},
    source: function(request, response) {
        console.log(request.term);
        $.ajax({
            url: "http://en.wikipedia.org/w/api.php",
            dataType: "jsonp",
            data: {
                'action': "opensearch",
                'format': "json",
                'search': request.term
            },
            success: function(data) {
                response(data[1]);
            }
        });
    }
});
</script>
</div>
</body>
</html>